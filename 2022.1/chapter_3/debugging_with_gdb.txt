Installing gdb:

sudo apt-get install build-essential gdb

Installing OpenOCD:

git clone https://git.code.sf.net/p/openocd/code openocd-code
cd openocd-code
./bootstrap
./configure --enable-jtag_vpi --enable-remote-bitbang
make
sudo make install

Using the spike.lds linker script:

cd $HOME/riscv-gnu-toolchain
riscv32-unknown-elf-gcc -g -nostartfiles -T spike.lds test_op_imm.s -o test_op_imm

Connecting spike:

cd $HOME/riscv-gnu-toolchain
spike --rbb-port=9824 -m0x0010010000:0x10000 test_op_imm

Connecting OpenOCD:

cd $HOME/riscv-gnu-toolchain
openocd -f spike.cfg

Connecting gdb:

cd $HOME/riscv-gnu-toolchain
riscv32-unknown-elf-gdb

Debugging session:

target remote localhost:3333
file test_op_imm
load
l
p $pc
si
info reg a1
info reg a2
l
b 16
c

Compiling basicmath_simple:

riscv32-unknown-elf-gcc -nostartfiles -T spike.lds -g -O3 basicmath_simple.c -o basicmath_simple -lm

Simulate basicmath_simple:

Connecting spike:

spike --rbb-port=9824 -m0x0010010000:0x10000 basicmath_simple

Connecting OpenOCD:

openocd -f spike.cfg

Connecting gdb:

riscv32-unknown-elf-gdb
target remote localhost:3333
file basicmath_simple
load
set $pc = 0x10018390
set $sp = 0x10020000
l
b 33
c
x/16x 0x1001ffc0

